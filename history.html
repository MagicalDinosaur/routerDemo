<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Line Game - 5</title>
</head>

<body>
    <p>
        <span id="coord">5</span> on the line.</p>
    <p>
        <a href="?x=6" onclick="go(1); return false;">Advance to 6</a> or
        <a href="?x=4" onclick="go(-1); return false;">retreat to 4</a>
    </p>
</body>
<script>
    var currentPage = 5; // prefilled by server！！！！
    function go(d) {
        setupPage(currentPage + d);
        history.pushState(currentPage, document.title, '?x=' + currentPage);
    }
    // 监听浏览器返回前进事件
    onpopstate = function (event) {
        console.log(event);
        setupPage(event.state);
    }

    function setupPage(page) {
        currentPage = page;
        document.title = 'Line Game - ' + currentPage;
        document.getElementById('coord').textContent = currentPage;
        document.links[0].href = '?x=' + (currentPage + 1);
        document.links[0].textContent = 'Advance to ' + (currentPage + 1);
        document.links[1].href = '?x=' + (currentPage - 1);
        document.links[1].textContent = 'retreat to ' + (currentPage - 1);
    }

</script>

</html>